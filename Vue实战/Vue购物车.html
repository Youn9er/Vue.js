<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>Vue购物车</title>
        <style>
            table, th, td {
                border: 1px solid #000;
                border-collapse: collapse; /*边框合并*/
            }
        </style>
    </head>
    <body>
        <complate id="shop">
            <button v-on:click="addProduct">添加商品</button>
            <table>
                <thead>
                    <tr>
                        <th></th>
                        <th>商品图片</th>
                        <th>商品信息</th>
                        <th>赠送</th>
                        <th>商品金额</th>
                        <th>商品数量</th>
                        <th>总金额</th>
                        <th>编辑</th>
                    </tr>
                </thead>
                <tbody v-for="product in productList">
                    <tr>
                        <td><input type="checkbox" name="" id="" v-on:click="check"></td>
                            <td><img v-bind:src="product.productImg" alt="无法显示图片，刷新试试" title="黄鹤楼" width="200px"></td>  <!--使用v-bind绑定元素固有属性 -->
                        <td>{{product.productName}}</td>
                        <td>
                            <ul>
                                <li v-for="part in product.parts">{{part.partsName}}</li>
                            </ul>
                        </td>
                        <td>{{product.productPrice}}</td>
                        <td>
                            <button v-on:click="reduce">-</button>
                            <input type="text" v-bind:value="product.productQuentity">
                            <button v-on:click="add">+</button>
                        </td>
                        <td>
                            {{product.productPrice * product.productQuentity}}
                        </td>
                        <td><a href="#">删除</a></td>
                    </tr>
                </tbody>
                <tfoot>
                    <td colspan="6">
                        <input type="checkbox" name="" id="" >全选
                    </td>
                    <td>
                        总计{{totalPrice}}
                    </td>
                    <td>
                        <button>结账</button>
                    </td>
                </tfoot>
            </table>
        </complate>
        
        <script src="js/vue.min.js"></script>
        <script src="node_modules/axios/dist/axios.min.js"></script>
        <script>
            var vm = new Vue({
                el: "#shop",
                data: {
                    productList: [],
                    totalPrice: ""
                },
                computed: {

                },
                methods: {
                    addProduct: function () {
                        var newProduct = {
                            "productId": 333,
                            "productName": "王老吉",
                            "productPrice": 12,
                            "productQuentity": 0,
                            "productImg": "jiaduobao.jpg",
                        };
                        this.productList.push(newProduct);
                    },
                    // removeProduct: function() {
                    //     this.productList
                    // },
                    check: function () {
                        this.totalPrice = this.productPrice * this.productQuentity;
                    },
                    reduce: function () {
                        this.productQuentity -= 1;
                        alert("hahah");
                    },
                    add: function () {
                        this.productQuentity += 1;
                    }
                },
                mounted: function () {  //挂载
                    var _this = this;
                    this.$nextTick(function(){      //所有组件一起挂载
                        axios.get('products.json').then(function(response){
                            // console.log(response);
                         _this.productList = response.data.result.productList;
                        });
                    });
                }
            });

            // document.getElementById("btn-add").onclick = function () {
            //     var newProduct = {
            //         "productId": 333,
            //         "productName": "王老吉",
            //         "productPrice": 12,
            //         "productQuentity": 6,
            //         "productImg": "jiaduobao.jpg",
            //     };
            //     vm.productList.push(newProduct);
            // };
        </script>
    </body>
</html>